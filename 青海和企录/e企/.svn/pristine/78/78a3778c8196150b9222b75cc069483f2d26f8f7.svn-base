
//
//  MainViewController.m
//  ConglomerateWeiChart
//
//  Created by åŒ–å¬é¹ on 13-12-26.
//  Copyright (c) 2013å¹´ åŒ–å¬é¹. All rights reserved.
//

#import "MainViewController.h"
#import "ContactsViewController.h"
#import "MoreMineViewController.h"



#import "SMSViewController.h"
#import "MailActRouter.h"
#import "AppDelegate.h"
#import "MailActController.h"
#import "FeedBackViewController.h"
#import "AboutViewController.h"
#import "AboutViewController.h"
#import "ChangePswViewController.h"
#import "NotifyViewController.h"

#import "H5ViewController.h"

#import "ViewController.h"

#import "MainNavigationCT.h"
#import "ContactsViewController.h"

#import "ServiceNumberAllListViewController.h"

#import "VisibilityContactModel.h"

#import "ServiceNumberWebViewController.h"

#import "AFClient.h"

#import "ZipArchive.h"

#import "UIImage+Tint.h"
#import "JSONKit.h"
#import "SqlAddressData.h"
#import "SqlLiteCreate.h"

#import "TaskTools.h"
#import "HuiyiViewController.h"
#import <CoreTelephony/CTCallCenter.h>
#import <CoreTelephony/CTCall.h>
#import "MoreMineViewController.h"
#import "Download.h"
#import "UIImageView+WebCache.h"
//åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œè¯¥æ—¶é—´ä¸å‹æ ˆå’Œå‡ºæ ˆæ—¶é—´ç›¸å½“
#define SLIDE_ANIMATION_DURATION 0.2

#define self_viewController_tag 10
#define left_viewController_tag 11

static int unReadCount = 0;

#define adress_update_tag 101
#define moa_down_tag 102

@interface MainViewController ()<UIScrollViewDelegate,UITableViewDataSource,UITableViewDelegate,UIGestureRecognizerDelegate,DownloadDelegate>
{
    __weak IBOutlet UIView *Navigation_View;
    NSDate * dateBegin;
    NSDate * dateEnd;
    __weak IBOutlet UIView *viewLine;
    CTCallCenter *_center;
    __weak IBOutlet UIButton *File_Transfer;
    __weak IBOutlet UIButton *Video_call;
}
@property(nonatomic,strong) UINavigationController *huiyiController;
//@property(nonatomic,strong)UIViewController *currentViewController;
@property (nonatomic) MailActRouter *mailActRouter;

@end

@implementation MainViewController
@synthesize viewControllers = _viewControllers;
@synthesize seletedIndex = _seletedIndex;
@synthesize previousNavViewController = _previousNavViewController;
@synthesize isiOSInCall = _isiOSInCall;


- (void)dealloc{
    //æ¶ˆæ¯çš„é€šçŸ¥
    
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        _seletedIndex = -1;
        _center = [[CTCallCenter alloc] init];
        __weak MainViewController* weakSelf = self;
        _center.callEventHandler = ^(CTCall *call){
            DDLogInfo(@"current iOS Call State is %@", call.callState);
            if ([call.callState isEqualToString:CTCallStateConnected]
                || [call.callState isEqualToString:CTCallStateIncoming]
                || [call.callState isEqualToString:CTCallStateDialing])
            {
                weakSelf.isiOSInCall = YES;
            }
            else
            {
                weakSelf.isiOSInCall = NO;
            }
        };
    }
    return self;
}


- (void)viewDidLoad
{
    [super viewDidLoad];
   int i= [[[NSUserDefaults standardUserDefaults]objectForKey:@"unconfirm_count"] integerValue];
    DDLogCInfo(@"::::::::::::::::%d",i);
    self.view.backgroundColor = [UIColor colorWithRed:56.0/255.0 green:108.0/255.0 blue:191.0/255.0 alpha:1.0];
    UIStoryboard *sb=[UIStoryboard storyboardWithName:@"Huiyi" bundle:nil];
    _huiyiController=  [sb instantiateViewControllerWithIdentifier:@"huiyiNavigation"];
    
//    File_Transfer.imageView.image = [[UIImage imageNamed:@"icon_document.png"]imageWithTintColor:[UIColor blackColor]];
//    
//    Video_call.imageView.image = [[UIImage imageNamed:@"icon_vedio_small@3x.png"]imageWithTintColor:[UIColor blackColor]];
    
    _scrllView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 66, 320, 150)];
    //è®¾ç½®èƒŒæ™¯é¢œè‰²
    _scrllView.backgroundColor = [UIColor clearColor];
    //åˆ†é¡µæ•ˆæœ
    _scrllView.pagingEnabled = YES;
    _scrllView.delegate = self;
    _scrllView.contentSize = CGSizeMake(SCREEN_WIDTH*4, 150);
    _scrllView.showsHorizontalScrollIndicator = NO;
    [self.view addSubview:_scrllView];
    Download *down=[[Download alloc]initWithURLString:[NSString stringWithFormat:@"http://%@/eas/ads",HTTP_IP]];
    down.delegate=self;
    /*float _x = 0;
    for (_i = 1; _i<=5; _i++)
    {
        _imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0+_x, 20, 320, 180)];
        _imageName = [NSString stringWithFormat:@"beijing%d.jpg",_i];
        _imageView.image = [UIImage imageNamed:_imageName];
        _imageView.userInteractionEnabled = YES;
        [_scrllView addSubview:_imageView];
        _x+=320;
        
        UITapGestureRecognizer*tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap:)];
        tap.numberOfTapsRequired = 1;
        tap.numberOfTouchesRequired = 1;
        tap.delegate = self;
        
        UITapGestureRecognizer*tap1 = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap1:)];
        tap1.numberOfTapsRequired = 1;
        tap1.numberOfTouchesRequired = 1;
        tap1.delegate = self;
        
        UITapGestureRecognizer*tap2 = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap2:)];
        tap2.numberOfTapsRequired = 1;
        tap2.numberOfTouchesRequired = 1;
        tap2.delegate = self;
        
        UITapGestureRecognizer*tap3 = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap3:)];
        tap3.numberOfTapsRequired = 1;
        tap3.numberOfTouchesRequired = 1;
        tap3.delegate = self;
        
        UITapGestureRecognizer*tap4 = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap4:)];
        tap4.numberOfTapsRequired = 1;
        tap4.numberOfTouchesRequired = 1;
        tap4.delegate = self;
        
        if (_i==1) {
            [_imageView addGestureRecognizer:tap];
            
        }else if (_i==2){
            [_imageView addGestureRecognizer:tap1];
        }else if (_i==3){
            [_imageView addGestureRecognizer:tap2];
        }else if (_i==4){
            [_imageView addGestureRecognizer:tap3];
        }else if (_i==5){
            [_imageView addGestureRecognizer:tap4];
        }
       

    }
     */
    //è®¾ç½®ç‚¹
    _pagControl = [[UIPageControl alloc]initWithFrame:CGRectMake(108, 190, 320, 30)];
    _pagControl.numberOfPages = 4;
    //è®¾ç½®ç‚¹é¢œè‰²
    //pagControl.pageIndicatorTintColor = [UIColor orangeColor];
    _pagControl.tag = 101;
    [self.view addSubview:_pagControl];
    
    
    
    
    viewLine.frame = CGRectMake(0, 0, self.view.frame.size.width, 0.5f);
    
    //    //   åˆ›å»ºæ•°æ®åº“
    //    [SqlLiteCreate getDataBase];
    //    //   åˆ›å»ºä¸ªäººä¿¡æ¯è¡¨
    //    [SqlAddressData createPersoninfoTable];
    //    //   åˆ›å»ºéƒ¨é—¨å…³ç³»è¡¨
    //    [SqlAddressData createBranchTable];
    //    //   åˆ›å»ºå¸¸ç”¨è”ç³»äººè¡¨
    //    [SqlAddressData createCommenContact];
    //    //   åˆ›å»ºè”ç³»äººå¯è§æ€§è¡¨
    //    //    [SqlAddressData createVisibilityContactTable];
    //    [SqlAddressData createNewVisibilityTable];
    //    //   åˆ›å»ºé¢†å¯¼äººå¯è§æ€§è¡¨
    //    [SqlAddressData createVisibilityLeaderTable];
    
    if (self.isFromLogin) {
        
    }
    
    // Do any additional setup after loading the view from its nib.
    self.navigationController.delegate=self;
    
    AppDelegate *ad =(AppDelegate *)[UIApplication sharedApplication].delegate;
    ad.noticeDelegate = self;
    
    
    _nomalImageArray = [[NSArray alloc]  initWithObjects:
                        @"icon_message.png",
                        @"icon_call-contact.png",
                        @"icon_SMS.png",
                        @"icon_email.png",
                        //                        @"public_icon_tabbar_apply_nm.png",
                        @"nav-bar_more.png",nil];
    
    _hightlightedImageArray = [[NSArray alloc]initWithObjects:
                               @"icon_message.png",
                               @"icon_call-contact.png",
                               @"icon_SMS.png",
                               @"icon_email.png",
                               //                               @"public_icon_tabbar_apply_pre.png",
                               @"nav-bar_more.png",nil];
    
    //    _nomalImageArray = [[NSArray alloc]  initWithObjects:@"public_icon_tabbar_msg_nm.png",@"public_icon_tabbar_ads_nm.png",@"mail",@"public_icon_tabbar_more_nm.png",nil];
    //
    //    _hightlightedImageArray = [[NSArray alloc]initWithObjects:@"public_icon_tabbar_msg_pre.png",@"public_icon_tabbar_ads_pre.png",@"mail_s",@"public_icon_tabbar_more_pre.png",nil];
    
    
    //è®¾ç½®å›¾ç‰‡çš„ä½ç½®
    self.tabbarButt1.contentEdgeInsets = UIEdgeInsetsMake(-10, 0, 0, 0);
    self.tabbarButt2.contentEdgeInsets = UIEdgeInsetsMake(-10, 0, 0, 0);
    self.tabbarButtTask.contentEdgeInsets = UIEdgeInsetsMake(-10, 0, 0, 0);
    self.tabbarButt3.contentEdgeInsets = UIEdgeInsetsMake(-10, 0, 0, 0);
    //    self.tabbarButtAppstore.contentEdgeInsets = UIEdgeInsetsMake(-10, 0, 0, 0);
    self.tabbarButt4.contentEdgeInsets = UIEdgeInsetsMake(-10, 0, 0, 0);
    
    //è®¾ç½®æé†’å›¾ç‰‡
    //    [self.tabbarButt1 setRemindImage:nil];
    
    //è®¾ç½®æé†’æ•°é‡
    [self.tabbarButt1 setRemindNum:0];
    [self.tabbarButt3 setRemindNum:[[[NSUserDefaults standardUserDefaults] objectForKey:@"æœªè¯»ä¸ªæ•°"] integerValue]];
    
    //è®¾ç½®æ ‡é¢˜
    [self.tabbarButt1 setTabbarTitleLabel:@"æ¶ˆæ¯"];
    [self.tabbarButt2 setTabbarTitleLabel:@"é€šè®¯å½•"];
    [self.tabbarButtTask setTabbarTitleLabel:@"çŸ­ä¿¡ç¾¤å‘"];
    [self.tabbarButt3 setTabbarTitleLabel:@"é‚®ç®±å®¢æˆ·ç«¯"];
    //    [self.tabbarButtAppstore setTabbarTitleLabel:@"åº”ç”¨ä¸­å¿ƒ"];
    [self.tabbarButt4 setTabbarTitleLabel:@""];
    //    if (_seletedIndex == -1)
    //    {
    //        //ç”¨self.èµ‹å€¼é»˜è®¤ä¼šè°ƒsetæ–¹æ³•
    //        self.seletedIndex = 0;
    //    }
    //    else
    //    {
    //        //ç”¨self.èµ‹å€¼é»˜è®¤ä¼šè°ƒsetæ–¹æ³•
    //        self.seletedIndex = _seletedIndex;
    //    }
    if(ORG_ID)
    {
        NSArray *unReadArray = [[SqliteDataDao sharedInstanse] findSetWithDictionary:@{@"user_id":USER_ID,@"readed":@"0",@"org_id":ORG_ID} andTableName:TASK_STATUS_TABLE orderBy:nil];
        //    self.tabbarButtTask.remindNum = [unReadArray count];
        if([unReadArray count] > 0)
        {
            self.tabbarButtTask.remindImage = NO;
        }
        else
        {
            self.tabbarButtTask.remindImage.hidden = YES;
        }
    }
    
    _other = [[UIButton alloc]init];
    _other.frame = CGRectMake(280, 26, 30, 30);
    [_other setBackgroundImage:[UIImage imageNamed:@"nav-bar_more.png"] forState:UIControlStateNormal];
    [_other addTarget:self action:@selector(ClickControlAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:_other];
    
    _grayView = [[UIView alloc]init];
    _grayView.backgroundColor = [UIColor blackColor];
    _grayView.alpha = 0.1;
    _grayView.frame = CGRectMake(0, 66, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height);
    //_grayView.userInteractionEnabled = YES;
    [self.view addSubview:_grayView];
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(buttonpress)];
    [_grayView addGestureRecognizer:singleTap];
    
    UITapGestureRecognizer *singleTaps = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(buttonpress)];
    [Navigation_View addGestureRecognizer:singleTaps];
    
    
    self.tableView = [[UITableView alloc]init];
    if ([UIScreen mainScreen].bounds.size.width == 414&&[UIScreen mainScreen].bounds.size.height == 736) {
        NSLog(@"6Plus");
        self.tableView.frame = CGRectMake([UIScreen mainScreen].bounds.size.width-[UIScreen mainScreen].bounds.size.width/3-10, 66, [UIScreen mainScreen].bounds.size.width/3, [UIScreen mainScreen].bounds.size.height/2-18);
    }else if ([UIScreen mainScreen].bounds.size.width == 375&&[UIScreen mainScreen].bounds.size.height == 667){
        NSLog(@"6");
        self.tableView.frame = CGRectMake([UIScreen mainScreen].bounds.size.width-[UIScreen mainScreen].bounds.size.width/3-10, 66, [UIScreen mainScreen].bounds.size.width/3, [UIScreen mainScreen].bounds.size.height/2-18);
    }else if ([UIScreen mainScreen].bounds.size.width == 320&&[UIScreen mainScreen].bounds.size.height == 568){
        NSLog(@"5s&&5");
        self.tableView.frame = CGRectMake([UIScreen mainScreen].bounds.size.width-[UIScreen mainScreen].bounds.size.width/3-10, 66, [UIScreen mainScreen].bounds.size.width/3, [UIScreen mainScreen].bounds.size.height/2-18);
    }else if ([UIScreen mainScreen].bounds.size.width == 320&&[UIScreen mainScreen].bounds.size.height == 480){
        NSLog(@"4s&&4");
        self.tableView.frame = CGRectMake([UIScreen mainScreen].bounds.size.width-[UIScreen mainScreen].bounds.size.width/3-10, 66, [UIScreen mainScreen].bounds.size.width/3, [UIScreen mainScreen].bounds.size.height/2+25);
    }
    
    self.tableView.alpha = 1.0;
    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    self.dataArray = @[@"1",@"2",@"3",@"4",@"5",@"6",@"7"];
    //[self.tableView reloadData];
    //self.tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLineEtched;
    //åˆ†å‰²çº¿é¡¶æ ¼
    if ([self.tableView respondsToSelector:@selector(setSeparatorInset:)])
    {
        [self.tableView setSeparatorInset:UIEdgeInsetsZero];
    }
    if ([self.tableView respondsToSelector:@selector(setLayoutMargins:)])
    {
        [self.tableView setLayoutMargins:UIEdgeInsetsZero];
    }
    //åˆ†å‰²çº¿é¢œè‰²
    self.tableView.separatorColor = [UIColor colorWithRed:235.0/255.0 green:235.0/255.0 blue:235.0/255.0 alpha:1.0];
    //éšè—å¤šä½™åˆ†å‰²çº¿
    self.tableView.tableFooterView = [[UIView alloc] init];
    //ç¦æ­¢æ»šåŠ¨
    self.tableView.scrollEnabled = NO;
    [self.view addSubview:self.tableView];
    _tableView.hidden = YES;
    _grayView.hidden = YES;
    
    [self SMSsend];
    [NSTimer scheduledTimerWithTimeInterval:3.0f target:self selector:@selector(changePic) userInfo:nil repeats:YES];
}


-(void)downloadDidFinishLoading:(Download *)download
{
    NSLog(@"qqqqqqq:%@",download.downloadDictionary);
    NSArray *imageArr=[download.downloadDictionary objectForKey:@"ads"];
    for (int i=0; i<imageArr.count; i++) {
        NSDictionary *dict=imageArr[i];
        UIImageView *imageview=[[UIImageView alloc]initWithFrame:CGRectMake(SCREEN_WIDTH*i, 0, SCREEN_WIDTH, 150)];
        imageview.userInteractionEnabled=YES;
        //imageview.backgroundColor=[UIColor redColor];
        [imageview setImageWithURL:[NSURL URLWithString:dict[@"picUrl"]] placeholderImage:[UIImage imageNamed:@"beijing1"]];
        UITapGestureRecognizer*tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap:)];
        tap.identifyTag=[dict objectForKey:@"pageUrl"];
        [imageview addGestureRecognizer:tap];
        [_scrllView addSubview:imageview];
    }
    _scrllView.contentSize=CGSizeMake(SCREEN_WIDTH*imageArr.count, 150);
}

-(void)tap:(UITapGestureRecognizer*)tap
{
    NSLog(@"%@",tap.identifyTag);
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:tap.identifyTag]];
}

//scrllViewè‡ªåŠ¨æ»šåŠ¨
-(void)changePic
{
    //æ‰§è¡Œä¸€æ¬¡
    static NSInteger x = 0;
    if (x<3) {
        x++;
    }else{
        x = 0;
    }
    _scrllView.contentOffset= CGPointMake(320*x, 0);
    
}


-(void)SMSsend{
    UIButton*Smssend = [[UIButton alloc]init];
    Smssend.frame = CGRectMake(100, 308, 44, 44);
    [Smssend addTarget:self action:@selector(launchpage) forControlEvents:UIControlEventTouchUpInside];
    [Smssend setImage:[UIImage imageNamed:@"icon_SMS.png"] forState:UIControlStateNormal];
    [self.view addSubview:Smssend];
}
//çŸ­ä¿¡ç¾¤å‘å»é™¤åŠ¨ç”»æ•ˆæœ
-(void)launchpage{
    SMSViewController*SView = [[SMSViewController alloc]init];
    [self presentViewController:SView animated:NO completion:nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    
    return 7;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString*cellName = @"Cell";
    UITableViewCell*cell = [tableView dequeueReusableCellWithIdentifier:cellName];
    if (!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellName];
    }
    //åˆ†å‰²çº¿é¡¶æ ¼
    if ([cell respondsToSelector:@selector(setSeparatorInset:)])
    {
        [cell setSeparatorInset:UIEdgeInsetsZero];
    }
    if ([cell respondsToSelector:@selector(setLayoutMargins:)])
    {
        [cell setLayoutMargins:UIEdgeInsetsZero];
    }
    
    
    cell.textLabel.text = [self.dataArray objectAtIndex:indexPath.row];
    cell.textLabel.numberOfLines = 0;
    cell.textLabel.font = [UIFont systemFontOfSize:12];
    cell.textLabel.textAlignment = UITextAlignmentCenter;
    //[cell.textLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
    cell.textLabel.textColor = [UIColor colorWithRed:140.0/255.0 green:140.0/255.0 blue:140.0/255.0 alpha:1.0];
    //é€‰ä¸­åé¢œè‰²ä¸å˜
    cell.selectionStyle =UITableViewCellSelectionStyleNone;
    
    switch (indexPath.row) {
        case 0:
            cell.textLabel.text = @"é€šçŸ¥æé†’";
            break;
        case 1:
            cell.textLabel.text = @"é‚®ç®±è®¾ç½®";
            break;
        case 2:
            cell.textLabel.text = @"ä¿®æ”¹å¯†ç ";
            break;
        case 3:
            cell.textLabel.text = @"æ¸…ç©ºç¼“å­˜";
            break;
        case 4:
            cell.textLabel.text = @"æ£€æŸ¥æ›´æ–°";
            break;
        case 5:
            cell.textLabel.text = @"å»ºè®®åé¦ˆ";
            break;
        case 6:
            cell.textLabel.text = @"å…³äº";
            break;
        default:
            break;
    }
    
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 38;
}
//æ›´å¤šé€‰é¡¹å»é™¤åŠ¨ç”»æ•ˆæœ
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.row == 0) {
        DDLogCInfo(@"é€šçŸ¥æé†’");
        NotifyViewController * notifyVC=[[NotifyViewController alloc]init];
        UINavigationController*nc = [[UINavigationController alloc]initWithRootViewController:notifyVC];
        nc.navigationBar.barTintColor = [UIColor colorWithRed:70.0/255.0 green:136.0/255.0 blue:241.0/255.0 alpha:1.0];
        //å­—ä½“é¢œè‰²
        nc.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor whiteColor] forKey:NSForegroundColorAttributeName];
        [self presentViewController:nc animated:NO completion:nil];
    }else if (indexPath.row == 1){
        DDLogCInfo(@"é‚®ç®±è®¾ç½®");
//        MailActController*mailAC = [[MailActController alloc]init];
//        [self presentViewController:mailAC animated:YES completion:nil];
        AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        MailActRouter *router = [app.dependencies actRouter];
        [router push:self];
    }else if (indexPath.row == 2){
        DDLogCInfo(@"ä¿®æ”¹å¯†ç ");
        ChangePswViewController *changePswVC = [[ChangePswViewController alloc]init];
        UINavigationController*nc = [[UINavigationController alloc]initWithRootViewController:changePswVC];
        nc.navigationBar.barTintColor = [UIColor colorWithRed:70.0/255.0 green:136.0/255.0 blue:241.0/255.0 alpha:1.0];
        //å­—ä½“é¢œè‰²
        nc.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor whiteColor] forKey:NSForegroundColorAttributeName];
        [self presentViewController:nc animated:NO completion:nil];
    }else if (indexPath.row == 3){
        DDLogCInfo(@"æ¸…ç©ºç¼“å­˜");
        [self performSelectorOnMainThread:@selector(clearCacheSuccess) withObject:nil waitUntilDone:YES];
    }else if (indexPath.row == 4){
        DDLogCInfo(@"æ£€æŸ¥æ›´æ–°");
        AboutViewController *aboutVC = [[AboutViewController alloc]init];
        UINavigationController*nc = [[UINavigationController alloc]initWithRootViewController:aboutVC];
        nc.navigationBar.barTintColor = [UIColor colorWithRed:70.0/255.0 green:136.0/255.0 blue:241.0/255.0 alpha:1.0];
        //å­—ä½“é¢œè‰²
        nc.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor whiteColor] forKey:NSForegroundColorAttributeName];
        [self presentViewController:nc animated:NO completion:nil];
    }else if (indexPath.row == 5){
        DDLogCInfo(@"æ„è§åé¦ˆ");
        FeedBackViewController*feedVC = [[FeedBackViewController alloc]init];
        UINavigationController*nc = [[UINavigationController alloc]initWithRootViewController:feedVC];
        nc.navigationBar.barTintColor = [UIColor colorWithRed:70.0/255.0 green:136.0/255.0 blue:241.0/255.0 alpha:1.0];
        //å­—ä½“é¢œè‰²
        nc.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor whiteColor] forKey:NSForegroundColorAttributeName];
        [self presentViewController:nc animated:NO completion:nil];
    }else if (indexPath.row == 6){
        DDLogCInfo(@"å…³äº");
        AboutViewController *aboutVC = [[AboutViewController alloc]init];
        UINavigationController*nc = [[UINavigationController alloc]initWithRootViewController:aboutVC];
        nc.navigationBar.barTintColor = [UIColor colorWithRed:70.0/255.0 green:136.0/255.0 blue:241.0/255.0 alpha:1.0];
        //å­—ä½“é¢œè‰²
        nc.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor whiteColor] forKey:NSForegroundColorAttributeName];
        [self presentViewController:nc animated:NO completion:nil];
    }
    
}

-(void)backView{
    DDLogCInfo(@"backView");
}


- (MailActRouter *)actRouter
{
    return _mailActRouter;
}


-(void)clearCacheSuccess
{
    [(AppDelegate *)[UIApplication sharedApplication].delegate showWithCustomView:nil detailText:@"æ¸…ç†å®Œæˆ" isCue:0 delayTime:1 isKeyShow:NO];
}

-(void)ClickControlAction:(UIButton*)button{
    NSLog(@"1111111qqwer");
//    if (_bools) {
//        _tableView.hidden = YES;
//        _grayView.hidden = YES;
//        _bools = NO;
//    }else{
//        _tableView.hidden = NO;
//        _grayView.hidden = NO;
//        _bools = YES;
//    }
    if (_tableView.hidden == NO) {
        _tableView.hidden = YES;
        _grayView.hidden = YES;
    }else{
        _tableView.hidden = NO;
        _grayView.hidden = NO;
    }
    
}

- (void)buttonpress {
    DDLogCInfo(@"å‘µå‘µå‘µå‘µ");
    _tableView.hidden = YES;
    _grayView.hidden = YES;
}


-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    if ([scrollView isMemberOfClass:[UITableView class]])
    {
    }
    else
    {
        int current = scrollView.contentOffset.x/320;
        UIPageControl*pageControl = (UIPageControl*)[self.view viewWithTag:101];
        pageControl.currentPage = current;
        
    }
}


-(void)getAddressbook
{
    
}
-(void)saveState:(BOOL)isSee forKey:(NSString*)key
{
    [[NSUserDefaults standardUserDefaults]setBool:isSee forKey:key];
    [[NSUserDefaults standardUserDefaults]synchronize];
}

#pragma mark-
#pragma mark HUD

- (void)hudWasHidden:(MBProgressHUD *)hud{
    [_HUD removeFromSuperview];
    _HUD = nil;
    _HUD.delegate=nil;
}
-(void)addHUD:(NSString *)labelStr{
    _HUD=[[MBProgressHUD alloc] initWithView:self.view];
    _HUD.dimBackground = YES;
    _HUD.labelText = labelStr;
    _HUD.delegate=self;
    
    [self.view addSubview:_HUD];
    [_HUD show:YES];
}

-(void)noticeReceivedMsg:(NSDictionary *)resultDict{
    
}

#pragma mark-
#pragma mark notification é€šçŸ¥tabbarè¯»äº†å¤šå°‘ä¿¡æ¯
-(void)markHasReadChatCountMain:(NSNotification *)notification{
    
    int notUnReadCount=[[notification.userInfo objectForKey:@"count"] intValue];
    
    unReadCount = unReadCount - notUnReadCount;
    self.tabbarButt1.remindNum = unReadCount>0?unReadCount:0;
    
    AppDelegate *app=[ConstantObject app];
    if (app.unReadNum>=notUnReadCount) {
        app.unReadNum=app.unReadNum-notUnReadCount;
    }
}

#pragma mark notification é€šçŸ¥tabbaræœªè¯»ä¿¡æ¯æ•°
-(void)markUnReadChatCountMain:(NSNotification *)notification{
    
    //    unReadCount = [SqliteDataDao queryAllUnReadCount];
    unReadCount = [[notification object] intValue];
    self.tabbarButt1.remindNum = unReadCount>0?unReadCount:0;
}

#pragma mark - view appear
-(void)viewDidAppear:(BOOL)animated{
    //    [self showTabBar:SlideDirectionLeft animated:NO];
    
}
-(void)viewWillAppear:(BOOL)animated{
    [self registerNotificationCenter];
}

#pragma mark - æ³¨å†Œé€šçŸ¥
-(void)registerNotificationCenter{
    //æ¶ˆæ¯çš„é€šçŸ¥
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(markHasReadChatCountMain:) name:NOTIFICATION_READ object:nil];
    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(markUnReadChatCountMain:) name:NOTIFICATION_UNREAD object:nil];
    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loginToServeSucceed:) name:@"loginToServeSucceed" object:nil];
    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(hideTabBar:) name:NOTIFICATION_HIDETABBAR object:nil];
    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(showTabBar:) name:NOTIFICATION_SHOWTABBAR object:nil];
    
}
#pragma mark - ç•Œé¢æ¶ˆå¤±
-(void)viewWillDisappear:(BOOL)animated{
    //ç§»é™¤æ‰æ‰€æœ‰çš„é€šçŸ¥
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

#pragma mark - åˆ‡æ¢é¡µé¢
- (void)setSeletedIndex:(int)aIndex

{
    //_selectIndex = aIndex;èµ‹å€¼
    // self. selectIndex = aIndex;æ­»å¾ªç¯
    
    
    
    //å¦‚æœç´¢å¼•å€¼æ²¡æœ‰æ”¹å˜ä¸åšå…¶ä»–æ“ä½œ
    // if (_seletedIndex == aIndex) return;
    
    //å¦‚æœç´¢å¼•å€¼æ”¹å˜äº†éœ€è¦åšæ“ä½œ
    /*
     å®‰å…¨æ€§åˆ¤æ–­
     å¦‚æœ_seletedIndexè¡¨ç¤ºå½“å‰æ˜¾ç¤ºçš„æœ‰è§†å›¾
     éœ€è¦æŠŠåŸæ¥çš„ç§»é™¤æ‰ï¼Œç„¶åæŠŠå¯¹åº”çš„TabBaræŒ‰é’®è®¾ç½®ä¸ºæ­£å¸¸çŠ¶æ€
     */
    if (_seletedIndex >= 0)
        
    {
        //æ‰¾å‡ºå¯¹åº”ç´¢å¼•çš„è§†å›¾æ§åˆ¶å™¨
        //UIViewController *priviousViewController = [_viewControllers objectAtIndex:_seletedIndex];
        //ç§»é™¤æ‰
        //[priviousViewController.view removeFromSuperview];
        //æ‰¾å‡ºå¯¹åº”çš„TabBaræŒ‰é’®
        BarButton *previousButton = (BarButton *)[self.view viewWithTag:_seletedIndex + 1];
        //è®¾ç½®ä¸ºæ­£å¸¸çŠ¶æ€ä¸‹çš„å›¾ç‰‡
        [previousButton setImage:[UIImage imageNamed:[_nomalImageArray objectAtIndex:_seletedIndex]] forState:UIControlStateNormal];
        [previousButton setBarButtonTitleColor:0];
        
    }
    
    /*
     è®°å½•å½“å‰ç´¢å¼•ï¼Œé‡‡ç”¨å±æ€§ç›´æ¥èµ‹å€¼çš„æ–¹å¼
     æ›´æ”¹TabBaræŒ‰é’®çŠ¶æ€ä¸ºé«˜äº®çŠ¶æ€
     æ·»åŠ è§†å›¾
     */
    
    //è®°å½•ä¸€ä¸‹å½“å‰çš„ç´¢å¼•
    _seletedIndex = aIndex;
    
    //è·å¾—å¯¹åº”çš„æŒ‰é’®å¹¶ä¸”è®¾ç½®ä¸ºé«˜äº®çŠ¶æ€ä¸‹çš„å›¾ç‰‡
    BarButton *currentButton = (BarButton *)[self.view viewWithTag:(aIndex + 1)];
    [currentButton setImage:[UIImage imageNamed:[_hightlightedImageArray objectAtIndex:aIndex]] forState:UIControlStateNormal];
    [currentButton setBarButtonTitleColor:1];
    //è·å¾—å¯¹åº”çš„è§†å›¾æ§åˆ¶å™¨
    UIViewController *currentViewController = [_viewControllers objectAtIndex:aIndex];
    //å¦‚æœæ¬¡æ¡ä»¶æˆç«‹è¡¨ç¤ºå½“å‰æ˜¯ç¬¬ä¸€ä¸ªï¼Œå³â€œå¯¼èˆªæ§åˆ¶å™¨â€
    
    
    if ([currentViewController isKindOfClass:[UINavigationController class]])
    {
        //è®¾ç½®å¯¼èˆªæ§åˆ¶å™¨çš„ä»£ç†
        ((UINavigationController *)currentViewController).delegate = self;
        UINavigationController *nav = (UINavigationController *)currentViewController;
        
        if (self.isToRootViewController == 1) {
            //å®˜
            [nav popToRootViewControllerAnimated:YES];
            self.isToRootViewController = NO;
            
        }
    }
    
    //è®¾ç½®å½“å‰è§†å›¾çš„å¤§å°
    currentViewController.view.frame = CGRectMake(0, 0, 320, self.view.bounds.size.height-50);
    
    //æ·»åŠ åˆ°Tabä¸Š
    [self.view addSubview:currentViewController.view];
    
    //æŠŠè§†å›¾æ”¾åˆ°TabBarä¸‹é¢
    // [self.view sendSubviewToBack:currentViewController.view];
    //é€šè®¯å½•ã€æ¶ˆæ¯ã€é‚®ç®±å»é™¤åŠ¨ç”»æ•ˆæœ
    [self presentViewController:currentViewController animated:NO completion:nil];
}


#pragma mark -
#pragma mark UINavigationControllerDelegate

- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    
    // UIViewControllerï¼šæ ˆé¡¶çš„è§†å›¾æ§åˆ¶å™¨ï¼›nå’Œm
    
    if (!_previousNavViewController)
        
    {
        //å¯¼èˆªæ§åˆ¶å™¨ä¸­çš„è§†å›¾æ•°ç»„
        self.previousNavViewController = navigationController.viewControllers;
    }
    
    
    
    /*
     æ˜¯å¦ä¸ºå‹æ ˆçš„æ ‡è®°ï¼Œåˆå§‹åŒ–ä¸ºNO
     å¦‚æœåŸæ¥çš„æ§åˆ¶å™¨æ•°ä¸å¤§äºå½“å‰å¯¼èˆªçš„è§†å›¾æ§åˆ¶å™¨æ•°è¡¨ç¤ºæ˜¯å‹æ ˆ
     */
    
    
    BOOL isPush = NO;
    if ([_previousNavViewController count] <= [navigationController.viewControllers count])
        
    {
        isPush = YES;
    }
    /*
     if (!isPush) {
     UIViewController *vc=[_previousNavViewController lastObject];
     if (_previousNavViewController.count>2 && [vc isKindOfClass:[MessageChatViewController class]]) {
     NSMutableArray *tempArray=[[NSMutableArray alloc] init];
     [tempArray addObject:[_previousNavViewController firstObject]];
     
     _previousNavViewController=tempArray;
     navigationController.viewControllers=tempArray;
     
     }
     }
     */
    /*
     ä¸Šä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨å½“å‹æ ˆçš„æ—¶å€™åº•éƒ¨æ¡æ˜¯å¦éšè—
     å½“å‰è§†å›¾æ§åˆ¶å™¨å½“å‹æ ˆçš„æ—¶å€™åº•éƒ¨æ¡æ˜¯å¦éšè—
     è¿™ä¸¤ä¸ªè§†å›¾æ§åˆ¶å™¨æœ‰å¯èƒ½æ˜¯åŒä¸€ä¸ª
     */
    //æ“ä½œç­¾çš„æ ˆé¡¶å…ƒç´ å’Œæ“ä½œåçš„æ ˆé¡¶å…ƒç´ ï¼Œè€…ä¸¤ä¸ªæ§åˆ¶å™¨å†…å®¹
    //è®¾ç½®éšè—äº†ç³»ç»Ÿçš„tablebarï¼Œç›¸å½“äºä¸€ä¸ªæ ‡è®°å†…å®¹æ¥ï¼›
    BOOL isPreviousHidden = [[_previousNavViewController lastObject] hidesBottomBarWhenPushed];
    BOOL isCurrentHidden = viewController.hidesBottomBarWhenPushed;
    
    //é‡æ–°è®°å½•å½“å‰å¯¼èˆªå™¨ä¸­çš„è§†å›¾æ§åˆ¶å™¨æ•°ç»„
    self.previousNavViewController = navigationController.viewControllers;
    
    /*
     å¦‚æœçŠ¶æ€ç›¸åŒä¸åšå…¶ä»–æ“ä½œ
     å¦‚æœä¸Šä¸€ä¸ªæ˜¾ç¤ºåˆ™éšè—TabBar
     å¦‚æœä¸Šä¸€ä¸ªéšè—åˆ™æ˜¾ç¤ºTabBar
     */
    if (!isPreviousHidden && !isCurrentHidden)
    {
        return;
    }
    else if(isPreviousHidden && isCurrentHidden)
    {
        return;
    }
    else if(isPreviousHidden && !isCurrentHidden)
    {
        //æ˜¾ç¤ºtabbar ï¼»å‡ºæ ˆï¼½secondviewcontrollerå›åˆ°ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨ï¼›
        //   [self showTabBar:isPush ? SlideDirectionLeft : SlideDirectionRight animated:animated];
    }
    
}

- (void)showTabBar:(NSNotification *)notification
{
    //æ ¹æ®å‹æ ˆè¿˜æ˜¯å‡ºæ ˆè®¾ç½®TabBaråˆå§‹ä½ç½®
    CGRect tempRect = _tabbarView.frame;
    //tempRect.origin.x = self.view.bounds.size.width * ( (direction == SlideDirectionLeft) ? 1 : -1);
    //_tabbarView.frame = tempRect;
    tempRect.origin.x = 0;
    _tabbarView.frame = tempRect;
    
    UIViewController *currentViewController = [_viewControllers objectAtIndex:_seletedIndex];
    
    CGRect viewRect = currentViewController.view.frame;
    viewRect.size.height = self.view.bounds.size.height - 44;
    currentViewController.view.frame = viewRect;
    
}

- (void)hideTabBar:(NSNotification *)notification
{
    SlideDirection direction = SlideDirectionRight;
    //è·å¾—å½“å‰è§†å›¾æ§åˆ¶å™¨
    UIViewController *currentViewController = [_viewControllers objectAtIndex:_seletedIndex];
    
    //å‹æ ˆæ—¶ï¼Œç§»é™¤æ‰‹åŠ¿
    for (UIGestureRecognizer * recognizer in self.view.gestureRecognizers) {
        if ([recognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
            [self.view removeGestureRecognizer:recognizer];
        }
    }
    
    //é‡ç½®é«˜åº¦ é‡æ–°åˆ†é…çª—å£çš„å¤§å° 43çš„ç™½è‰²æŒ‰é’®
    CGRect viewRect = currentViewController.view.frame;
    viewRect.size.height = self.view.bounds.size.height;
    currentViewController.view.frame = viewRect;
    
    //è®¾ç½®TabBarçš„ä½ç½® è®¾ç½®åŠ¨ç”»ç­¾çš„ä½ç½® ç„¶åéšè—ï¼›
    CGRect tempRect = _tabbarView.frame;
    tempRect.origin.x = 0;
    _tabbarView.frame = tempRect;
    
    //æ ¹æ®å‹æ ˆè¿˜æ˜¯å‡ºæ ˆè®¾ç½®åŠ¨ç”»æ•ˆæœ
    tempRect.origin.x = self.view.bounds.size.width * (direction == SlideDirectionLeft ? -2 : 1);
    _tabbarView.frame = tempRect;
    
}

/*
 æ˜¾ç¤ºåº•éƒ¨TabBarç›¸å…³
 éœ€è¦é‡ç½®å½“å‰è§†å›¾æ§åˆ¶å™¨Viewçš„é«˜åº¦ä¸ºæ•´ä¸ªå±å¹•çš„é«˜åº¦-TabBarçš„é«˜åº¦
 */
/*
 - (void)showTabBar:(SlideDirection)direction animated:(BOOL)isAnimated
 {
 //å‡ºæ ˆæ—¶ï¼Œåˆ›å»ºæ‰‹åŠ¿
 
 
 //æ ¹æ®å‹æ ˆè¿˜æ˜¯å‡ºæ ˆè®¾ç½®TabBaråˆå§‹ä½ç½®
 CGRect tempRect = _tabbarView.frame;
 //tempRect.origin.x = self.view.bounds.size.width * ( (direction == SlideDirectionLeft) ? 1 : -1);
 //_tabbarView.frame = tempRect;
 tempRect.origin.x = 0;
 _tabbarView.frame = tempRect;
 
 UIViewController *currentViewController = [_viewControllers objectAtIndex:_seletedIndex];
 
 CGRect viewRect = currentViewController.view.frame;
 viewRect.size.height = self.view.bounds.size.height - 44;
 currentViewController.view.frame = viewRect;
 
 //æ‰§è¡ŒåŠ¨ç”»
 [UIView animateWithDuration:isAnimated ? SLIDE_ANIMATION_DURATION : 0 delay:0 options:0 animations:^
 {
 //åŠ¨ç”»æ•ˆæœ
 CGRect tempRect = _tabbarView.frame;
 tempRect.origin.x = 0;
 _tabbarView.frame = tempRect;
 
 }completion:^(BOOL finished)
 
 {
 
 //åŠ¨ç”»ç»“æŸæ—¶
 //é‡ç½®å½“å‰è§†å›¾æ§åˆ¶å™¨Viewçš„é«˜åº¦ä¸ºæ•´ä¸ªå±å¹•çš„é«˜åº¦-TabBarçš„é«˜åº¦
 UIViewController *currentViewController = [_viewControllers objectAtIndex:_seletedIndex];
 
 CGRect viewRect = currentViewController.view.frame;
 viewRect.size.height = self.view.bounds.size.height - 44;
 currentViewController.view.frame = viewRect;
 }];
 
 }
 */
/*
 éšè—åº•éƒ¨TabBarç›¸å…³
 éœ€è¦é‡ç½®å½“å‰è§†å›¾æ§åˆ¶å™¨Viewçš„é«˜åº¦ä¸ºæ•´ä¸ªå±å¹•çš„é«˜åº¦
 */
/*
 - (void)hideTabBar:(SlideDirection)direction animated:(BOOL)isAnimated
 {
 //è·å¾—å½“å‰è§†å›¾æ§åˆ¶å™¨
 UIViewController *currentViewController = [_viewControllers objectAtIndex:_seletedIndex];
 
 //å‹æ ˆæ—¶ï¼Œç§»é™¤æ‰‹åŠ¿
 for (UIGestureRecognizer * recognizer in self.view.gestureRecognizers) {
 if ([recognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
 [self.view removeGestureRecognizer:recognizer];
 }
 }
 
 //é‡ç½®é«˜åº¦ é‡æ–°åˆ†é…çª—å£çš„å¤§å° 43çš„ç™½è‰²æŒ‰é’®
 CGRect viewRect = currentViewController.view.frame;
 viewRect.size.height = self.view.bounds.size.height;
 currentViewController.view.frame = viewRect;
 
 //è®¾ç½®TabBarçš„ä½ç½® è®¾ç½®åŠ¨ç”»ç­¾çš„ä½ç½® ç„¶åéšè—ï¼›
 CGRect tempRect = _tabbarView.frame;
 tempRect.origin.x = 0;
 _tabbarView.frame = tempRect;
 
 //é‡‡ç”¨Blockçš„å½¢å¼å¼€å¯ä¸€ä¸ªåŠ¨ç”»
 [UIView animateWithDuration:isAnimated ? SLIDE_ANIMATION_DURATION : 0 delay:0 options:0 animations:^(void)
 {
 //æ ¹æ®å‹æ ˆè¿˜æ˜¯å‡ºæ ˆè®¾ç½®åŠ¨ç”»æ•ˆæœ
 CGRect tempRect = _tabbarView.frame;
 tempRect.origin.x = self.view.bounds.size.width * (direction == SlideDirectionLeft ? -2 : 1);
 _tabbarView.frame = tempRect;
 
 }
 completion:^(BOOL finished){
 
 }
 ];
 
 }
 */


- (IBAction)selectTabbar:(id)sender {
    //è·å¾—ç´¢å¼•
    //    DDLogInfo(@"%d",sende);
    NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
    if ([[userDefaults objectForKey:@"is_to_chat"] isEqualToString:@"1"]) {
        /**
         *  åˆ¤è¯»æ˜¯å¦æ˜¯å‘èµ·èŠå¤©å›è¯çš„æ“ä½œï¼Œå¦‚æœæ˜¯ï¼Œè®¾ç½®rootView
         */
        self.isToRootViewController=YES;
        [userDefaults setObject:@"0" forKey:@"is_to_chat"];
        [userDefaults synchronize];
    }
    
    BarButton *btn = (BarButton *)sender;
    int index = btn.tag - 1;
    
    if (self.tabbarButtonClick) {
        self.tabbarButtonClick(index);
    }
    //ç”¨self.èµ‹å€¼é»˜è®¤ä¼šè°ƒsetæ–¹æ³• ä¼´éšç€æ§åˆ¶å™¨è‡ªåŠ¨åˆ‡æ¢çš„è¿‡ç¨‹
    self.seletedIndex = index;
    
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(void)toRootView{
    NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
    if ([[userDefaults objectForKey:@"is_to_chat"] isEqualToString:@"1"]) {
        /**
         *  åˆ¤è¯»æ˜¯å¦æ˜¯å‘èµ·èŠå¤©ä¼šè¯çš„æ“ä½œï¼Œå¦‚æœæ˜¯ï¼Œè®¾ç½®rootView
         */
        self.isToRootViewController=YES;
        [userDefaults setObject:@"0" forKey:@"is_to_chat"];
        [userDefaults synchronize];
    }
}
#pragma mark - notification æ¶ˆæ¯è¿›å…¥å‰å°æ£€æŸ¥åˆ°æ–°å·¥ä½œåœˆæ¶ˆæ¯ æˆ–è€…æ¶ˆæ¯è¢«è¯„è®ºæˆ–èµ
-(void)noticeNewWorkMessage:(NSNotification *)not{
    
    [[LogRecord sharedWriteLog] writeLog:[NSString stringWithFormat:@"æ˜¾ç¤ºå°çº¢ç‚¹,%@",not.userInfo]];
    
    NSDictionary * dict = [not userInfo];
    if ([[dict valueForKey:@"replyCount"] intValue] > 0) {//è¯„è®ºæˆ–èµæ˜¾ç¤ºæ•°é‡ï¼Œä¼˜å…ˆçº§é«˜
        //        self.tabbarButt3.remindNum = [[dict valueForKey:@"replyCount"] intValue];
        //        self.tabbarButt3.remindNum = -1;
    }else if([[dict valueForKey:@"msgCount"] intValue] > 0) {//æ–°æ¶ˆæ¯åªæ˜¾ç¤ºçº¢ç‚¹ï¼Œä¼˜å…ˆçº§ä½
        //        self.tabbarButt3.remindNum = -1;
    }else if ([dict valueForKeyPath:@"uuid"]!=nil){
        //        self.tabbarButt3.remindNum = -1;
    }else{
        //        self.tabbarButt3.isRemind = NO;
        //        self.tabbarButt3.remindNum = 0;
    }
#pragma mark - æ˜¾ç¤ºå°çº¢ç‚¹
    AppDelegate *appDel=(AppDelegate *)([UIApplication sharedApplication].delegate);
    if (appDel.is_update) {
        //æœ‰æ›´æ–°
        self.tabbarButt4.remindNum = -1;
    }else{
        self.tabbarButt4.remindNum = 0;
    }
}
-(void)loginToServeSucceed:(id)sender{
    //    [self requestAddressBook];
}

- (IBAction)buttobClink:(UIButton *)sender {
    NSLog(@"æ•¬è¯·æœŸå¾…");
    
    
    UIAlertView *a=[[UIAlertView alloc]initWithTitle:@"ğŸ˜œ" message:@"æ•¬è¯·æœŸå¾…" delegate:nil cancelButtonTitle:@"ç¡®å®š" otherButtonTitles:nil, nil];
    
    [a show];
}
- (IBAction)appCenter:(UIButton *)sender {
    NSLog(@"åº”ç”¨ä¸­å¿ƒ");
//    ViewController * vC=[[ViewController alloc]init];
//    [self presentViewController:vC animated:YES completion:^{
//        
//    }];
    
    
    
   
    NSURL *url =[NSURL URLWithString:[NSString stringWithFormat:@"http://%@/eas/AppCenter/",HTTP_IP]];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    H5ViewController *h5VC = [[H5ViewController alloc] initWithNibName:@"H5ViewController" bundle:nil withRequest:request];

   
    h5VC.hidesBottomBarWhenPushed = YES;
    h5VC.currentH5Types = AppRecommendationType;
   
    
    //åº”ç”¨ä¸­å¿ƒå»é™¤åŠ¨ç”»æ•ˆæœ
    [self presentViewController:h5VC animated:NO completion:^{
        
    }];

}
//ä¼šè®®é€šçŸ¥å»é™¤åŠ¨ç”»æ•ˆæœ
- (IBAction)huiyi:(UIButton *)sender {
    [self presentViewController:_huiyiController animated:NO completion:nil];
}

#pragma mark - alert view
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    switch (alertView.tag) {
        case adress_update_tag:{
            if (buttonIndex==0) {
                //ä¸‹è½½é€šè®¯å½•
                
            }
            
            break;
        }
        case moa_down_tag:{
            if (buttonIndex == 0) {
                
            }
            break;
        }
            
            
        default:
            break;
    }
    
}
@end
